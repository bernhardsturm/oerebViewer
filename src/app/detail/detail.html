<aside id="menuLeftSlider" class="position-left" ng-class="{'active-menu': main.menuStatus}">

    <nav id="mainNav" class="mainnav mobile clearfix">
        <div class="row top-menu">
          <div class="small-8">
          </div>
            <div class="small-4 lang-selector">
                <svg class="icon icon-globe">
                    <use xlink:href="#icon-globe"></use>
                </svg>

                <span ng-click="main.changeLanguage('de')">
                    <a title="Deutsche Version" ng-class="{'is-active': main.isCurrentLanguage('de')}">Deutsch</a>
                </span>
                <span>
                    <a ng-click="main.changeLanguage('fr')" title="Version française"
                       ng-class="{'is-active': main.isCurrentLanguage('fr')}">Français</a>
                </span>
            </div>
        </div>



        <div class="menu vertical">
          <div class="row intro-row">
            <div class="small-12">
              <h1 ng-class="{'hidden': detail.noDatas}">{{"propertyLoaded" | translate}}: {{main.extract.data.RealEstate.Number}}
                  ({{main.extract.data.RealEstate.Municipality}})
              </h1>
              <p class="info-date">{{main.extract.data.CreationDate | date:'dd.MM.yyyy HH:mm:ss'}}</p>
              <div class="pdf-download" ng-class="{'hidden': detail.noDatas}">

                    <div class="small-12">
                        <svg class="icon icon-map">
                            <use xlink:href="#icon-map"></use>
                        </svg>
                        <a class="external-link" target="_blank" href="http://www.map.apps.be.ch/pub/synserver?query1=egrid&keyvalue1={{main.extract.egrid}}&keyname1=EGRID&project=a42pub_oereb&language=de&userprofile=geo" title="{{'detailPropertyGISMap' | translate}}">{{"detailPropertyGISMap"
                            | translate}}</a>
                    </div>

                  <div class="small-12">
                      <svg class="icon icon-file">
                          <use xlink:href="#icon-file"></use>
                      </svg>
                      <a class="external-link"
                         href="https://www.oereb2-test.apps.be.ch/OerbverSVC.svc/extract/reduced/pdf/{{main.extract.egrid}}?lang=de"
                         title='{{"detailDownloadPDF" | translate}}'>{{"detailDownloadPDF" | translate}}</a>
                  </div>
              </div>
            </div>
          </div>

            <div ng-class="{'hidden': !detail.noDatas}" class="no-property">
                <p class="hint">{{ 'no_property_loaded' | translate }}</p>
            </div>

            <v-accordion class="vAccordion--default" ng-if="!detail.noDatas">


                <!-- Restrictions -->
                <v-pane expanded class="restrictions">
                    <v-pane-header>
                        {{"detailConcernedThemes1" | translate}}
                    </v-pane-header>

                    <v-pane-content>

                        <!-- sometimes there are themes but no restrictions -->
                        <ul ng-if="main.extract.restrictions.length == 0 && main.extract.themes.length > 0">
                            <li ng-repeat="theme in main.extract.themes track by $index">
                                {{ ::theme.Name }}
                            </li>
                        </ul>

                        <!-- neither restrictions nor themes -->
                        <div ng-if="main.extract.restrictions.length == 0 && main.extract.themes.length == 0">
                            {{"noRestrictions" | translate}}
                        </div>

                        <!-- if restrictions -->
                        <v-accordion ng-if="main.extract.restrictions.length > 0"
                                 oncollapse="detail.collapse(index, id)"
                                 onexpand="detail.expand(index, id)"
                        >
                            <v-pane ng-repeat="restriction in main.extract.restrictions track by $index" id="{{ restriction.code }}">
                                <v-pane-header>
                                    {{ ::restriction.name }}
                                </v-pane-header>
                                <v-pane-content>

                                    <div class="row theme-key">
                                        <h3>{{"restrictionConcernedKey" | translate}}</h3>
                                    </div>

                                    <div ng-repeat="v in restriction.values" class="accordion-navigation">
                                        <div class="row restriction-info">
                                            <div class="small-1 oereb-label"><img class="legend-symbol" src="{{v.Symbol}}" /></div>
                                            <div class="small-11 medium-7 oereb-value">{{v.Information.LocalisedText.Text}}</div>
                                            <div class="small-1 show-for-small-only"></div>
                                            <div ng-if="v.TypeCodelist == 'Polygon'" class="small-11 medium-4 oereb-area">{{v.Area}}m² ({{v.PartInPercent}}%)</div>
                                            <div ng-if="v.TypeCodelist == 'Polyline'" class="small-11 medium-4 oereb-area">{{v.Area}}m</div>
                                            <div ng-if="v.TypeCodelist == 'Point'" class="small-11 medium-4 oereb-area">{{v.Area}} Anzahl</div>
                                        </div>
                                    </div>

                                    <div class="row more-info">
                                        <div class="small-12">
                                            <svg class="icon icon-layers">
                                                <use xlink:href="#icon-layers"></use>
                                            </svg>
                                            <a class="external-link" target="_blank" href="{{restriction.values[0].Map.LegendAtWeb}}" title="{{'restrictionKeyDownload' | translate}}">{{"restrictionKeyDownload" | translate}} ({{restriction.name}})</a>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <h3 class="theme-heading">{{"restrictionLegalProvision" | translate }}</h3>
                                    </div>
                                    <div ng-repeat="v in restriction.values" class="accordion-navigation">
                                        <div ng-repeat="document in v.LegalProvisions | unique:'document.TextAtWeb.LocalisedText.Text'" class="row more-info pdf-list">

                                            <div class="small-12">
                                                <svg class="icon icon-file">
                                                    <use xlink:href="#icon-file"></use>
                                                </svg>
                                                <a class="external-link" target="_blank" href="{{document.TextAtWeb.LocalisedText.Text}}" title="PDF">{{document.OfficialTitle.LocalisedText.Text}}</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h3 class="theme-heading">{{"restrictionAuthority" | translate}}</h3>
                                    </div>
                                    <div class="row more-info pdf-list">
                                        <div class="small-12">
                                            <svg class="icon icon-open">
                                                <use xlink:href="#icon-open"></use>
                                            </svg>
                                            <a class="external-link" target="_blank" href="{{restriction.values[0].LegalProvisions[0].ResponsibleOffice.Name.LocalisedText.Text}}" title="Link">{{restriction.values[0].LegalProvisions[0].ResponsibleOffice.Name.LocalisedText.Text}}</a>
                                        </div>
                                    </div>

                                </v-pane-content>
                            </v-pane>
                        </v-accordion>


                    </v-pane-content>
                </v-pane>
                <!-- / Restrictions -->


                <!-- NoRestrictions -->
                <v-pane class="norestrictions">
                    <v-pane-header>
                        {{"detailNoRestrictions" | translate}}
                    </v-pane-header>

                    <v-pane-content>
                        <!-- nested accordion -->
                        <ul>
                            <li ng-repeat="theme in main.extract.ncthemes track by $index">
                                {{ ::theme.Name }}
                            </li>
                        </ul>
                    </v-pane-content>
                </v-pane>
                <!-- / NoRestrictions -->

                <!-- Missing Restrictions -->
                <v-pane class="missingrestrictions">
                    <v-pane-header>
                        {{"detailMissingRestrictions" | translate}}
                    </v-pane-header>

                    <v-pane-content>
                        <!-- nested accordion -->
                        <ul>
                            <li ng-repeat="theme in main.extract.wdthemes track by $index">
                                {{ ::theme.Name }}
                            </li>
                        </ul>
                    </v-pane-content>
                </v-pane>
                <!-- / Missing Restrictions -->

                <!-- General Information -->
                <v-pane>
                    <v-pane-header>
                        {{"propertyDetail" | translate}} {{main.extract.data.RealEstate.Number}}
                            ({{main.extract.data.RealEstate.Municipality}})

                    </v-pane-header>

                    <v-pane-content>
                        <div class="row property-info">
                            <div class="medium-4 oereb-label">{{"detailRealEstateNr" | translate}}</div>
                            <div class="medium-1"></div>
                            <div class="medium-7 oereb-value">{{main.extract.data.RealEstate.Number}}</div>
                        </div>
                        <div class="row property-info">
                            <div class="medium-4 oereb-label">{{"detailEGRID" | translate}}</div>
                            <div class="medium-1"></div>
                            <div class="medium-7 oereb-value">{{main.extract.egrid}}</div>
                        </div>
                        <div class="row property-info">
                            <div class="medium-4 oereb-label">{{"detailCommunityBFS" | translate}}</div>
                            <div class="medium-1"></div>
                            <div class="medium-7 oereb-value">{{main.extract.data.RealEstate.Municipality}}
                                ({{main.extract.data.RealEstate.FosNr}})
                            </div>
                        </div>
                        <div class="row property-info">
                            <div class="medium-4 oereb-label">{{"detailSubUnitOfLandRegister" | translate}}</div>
                            <div class="medium-1"></div>
                            <div class="medium-7 oereb-value">{{main.extract.data.RealEstate.SubunitofLandRegister}}
                            </div>
                        </div>
                        <div class="row property-info">
                            <div class="medium-4 oereb-label">{{"detailRealEstateArea" | translate}}</div>
                            <div class="medium-1"></div>
                            <div class="medium-7 oereb-value">{{main.extract.data.RealEstate.LandRegistryArea}}
                                m<sup>2</sup></div>
                        </div>
                        <div class="row property-info">
                            <div class="medium-4 oereb-label">{{"detailExtractIdentifier" | translate}}</div>
                            <div class="medium-1"></div>
                            <div class="medium-7 oereb-value">{{main.extract.data.ExtractIdentifier}}</div>

                        </div>
                        <div class="row property-info">
                            <div class="medium-4 oereb-label">{{"detailExtractDate" | translate}}</div>
                            <div class="medium-1"></div>
                            <div class="medium-7 oereb-value">{{main.extract.data.CreationDate | date:'dd.MM.yyyy HH:mm:ss'}}
                            </div>
                        </div>
                        <div class="row property-info">
                            <div class="medium-4 oereb-label">{{"detailResponsible" | translate}}</div>
                            <div class="medium-1"></div>
                            <div class="medium-7 oereb-value">
                                {{main.extract.data.PLRCadastreAuthority.Name.LocalisedText.Text}},
                                {{main.extract.data.PLRCadastreAuthority.Street}}&nbsp;{{main.extract.data.PLRCadastreAuthority.Number}},
                                {{main.extract.data.PLRCadastreAuthority.PostalCode}}&nbsp;{{main.extract.data.PLRCadastreAuthority.City}}
                            </div>
                        </div>
                        <div class="row more-info clearfix pdf-download">
                            <div class="small-12">
                                <svg class="icon icon-file">
                                    <use xlink:href="#icon-file"></use>
                                </svg>
                                <a class="external-link"
                                   href="https://www.oereb2-test.apps.be.ch/OerbverSVC.svc/extract/reduced/pdf/{{main.extract.egrid}}?lang=de"
                                   title='{{"detailDownloadPDF" | translate}}'>{{"detailDownloadPDF" | translate}}</a>
                            </div>
                        </div>
                    </v-pane-content>
                </v-pane>
                <!-- / General Information -->



            </v-accordion>

            <!-- Seperatly Accordion for history -->
            <v-accordion class="vAccordion--default history">

                <!-- History -->
                <v-pane>
                    <v-pane-header>
                        {{"detailPropertyHistory" | translate}} <span class="secondary badge">{{main.history.length}}</span>
                    </v-pane-header>

                    <v-pane-content class="history-item">
                        <!-- nested accordion -->
                        <ul>
                            <li ng-repeat="hextract in main.history track by $index">
                                <a ui-sref="home.detail({egrid: hextract.egrid, restriction: ''})"
                                   title="{{'detailLinkRealEstate' | translate}} {{hextract.data.RealEstate.Number}}, {{'detailCommunity' | translate}} {{hextract.data.RealEstate.Municipality}}">
                                    <div ng-style="{'background-image': 'url(' + hextract.data.MunicipalityLogo + ')'}" class="logo-gemeinde"></div>
                                    Liegenschaft Nr. {{hextract.data.RealEstate.Number}}, Gemeinde {{hextract.data.RealEstate.Municipality}} ({{hextract.data.RealEstate.FosNr}})
                                    <span class="history-date">
                                        {{main.extract.data.CreationDate | date:'dd.MM.yyyy HH:mm:ss'}}
                                    </span>
                                </a>
                            </li>
                        </ul>
                        <!-- copy to clipboard -->
                    </v-pane-content>
                </v-pane>
                <!-- / History -->

            </v-accordion>


            <ul class="contentLinks">
                <li ng-if="!detail.noDatas"><a ng-click="main.showGlossary()">Glossar</a></li>
                <li><a ng-click="main.showImprint()">Rechtliches und Impressum</a></li>
            </ul>

        </div>
    </nav>
</aside>
